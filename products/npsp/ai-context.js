// Auto-generated by scripts/generate-ai-context.mjs
// Do not edit manually. Regenerate with: node scripts/generate-ai-context.mjs npsp
export const AI_CONTEXT = "You are an expert on Salesforce Nonprofit Success Pack (NPSP) 3.x.\nAnswer questions based ONLY on the following product knowledge. If the question is not about NPSP or you are unsure, say so clearly. Keep answers concise (2-4 sentences).\n\n## Domains (18)\n- **Donations & Payments** (donations): The heart of NPSP.  Donations are Salesforce Opportunities with specialized nonprofit behavior.\n- **Contacts & Households** (contacts): NPSP reimagines the Salesforce Account-Contact model for nonprofits.  The Household Account model groups family members under a shared Account.\n- **Recurring Donations (RD2)** (recurring): Enhanced Recurring Donations v2 is one of NPSP's most complex subsystems with 89 Apex classes.  Manages scheduled recurring gifts with configurable frequencies, pause/resume, status automation, change logging, and Elevate payment integration.\n- **Customizable Rollups (CRLP)** (rollups): NPSP's most architecturally sophisticated subsystem: 76 Apex classes.  Replaces legacy hardcoded rollups (RLLP_) with a metadata-driven engine.\n- **Soft Credits** (softcredits): Attributes donations to contacts beyond the primary donor.  Standard OCR-based soft credits via OpportunityContactRole, plus custom Partial Soft Credits (Partial_Soft_Credit__c) for splitting amounts.\n- **Allocations & Fund Accounting** (allocations): Distributes donation amounts across General Accounting Units (GAUs).  28 ALLO_ classes.\n- **TDTM Framework** (tdtm): Table-Driven Trigger Management is NPSP's architectural foundation.  ONE trigger per object dispatches to handler classes registered in Trigger_Handler__c custom SETTING (not CMDT).\n- **Batch Processing** (batch): 45 batch Apex classes handle async processing exceeding governor limits.  Batch jobs cover: rollup recalculation (14 CRLP batches), recurring donation evaluation, data import/migration, household naming, level assignment, error processing, and address verification.\n- **Relationships** (relationships): Tracks interpersonal relationships between Contacts (spouse, parent, employer, friend).  6 REL_ classes.\n- **Address Management** (addresses): Manages addresses as first-class objects (Address__c) linked to Accounts.  20 ADDR_ classes.\n- **Affiliations** (affiliations): Links Contacts to organizational Accounts (employer, board membership, volunteer role).  Unlike Relationships (contact-to-contact), Affiliations are contact-to-organization.\n- **Engagement Plans** (engagement): Templated sequences of Tasks for stewardship workflows.  12 EP_ classes.\n- **Batch Data Import (BDI)** (bdi): Powerful data import engine with 66 Apex classes.  Loads donations, contacts, and records through a staging object (DataImport__c).\n- **Gift Entry** (giftentry): Modern Lightning-based gift entry built on BDI.  10 GE_ classes, 9 BGE_ classes, 20+ LWC components.\n- **Levels (Donor Tiers)** (levels): Assigns donor tiers based on rollup field values.  6 LVL_ classes.\n- **Error Handling** (errors): Centralized error framework with 22 ERR_ classes.  Catches exceptions from TDTM handlers, logs to Error__c custom object, optionally sends email notifications.\n- **Settings & Configuration** (settings): All config stored in 14+ Custom Settings objects, managed through UTIL_CustomSettingsFacade (unified facade with in-memory caching).  64 STG_ classes for Visualforce settings panels.\n- **Payment Services (Elevate)** (elevate): Integration with Salesforce Elevate for payment processing.  14 PS_ classes.\n\n## Key Components (55)\n- **Opportunity Naming** [Donations & Payments]: Auto-names donations using configurable patterns from donor, amount, date, record type, and campaign fields.  OPP_OpportunityNaming handler runs before insert/update.\n- **Payment Processing** [Donations & Payments]: Auto-creates npe01__OppPayment__c records when Opportunities are created.  PMT_Payment_TDTM handles creation, sync, currency validation, and accounting data consistency enforcement.\n- **Donor Statistics** [Donations & Payments]: Tracks giving history on Contact/Account: total gifts, largest gift, first/last gift date, giving level, consecutive years, donor streaks.  Updated by CRLP rollup engine after every donation change.\n- **Matching Gifts** [Donations & Payments]: Tracks corporate matching gift programs.  MTCH_Opportunity_TDTM links a donation to a matching gift Opportunity.\n- **Contact Roles** [Donations & Payments]: OPP_OpportunityContactRoles_TDTM and HH_OppContactRoles_TDTM manage primary and soft credit contact roles.  Auto-creates OCRs for household members, enabling soft credit attribution.\n- **Cascade Deletes** [Donations & Payments]: OPP_CascadeDeleteLookups_TDTM and PMT_CascadeDeleteLookups_TDTM implement soft cascade deletes through lookup relationships.  Prevents orphaned payment records when Opportunities are deleted.\n- **Household Account Model** [Contacts & Households]: Default NPSP model.  Each household gets an Account record.\n- **Household Naming** [Contacts & Households]: HH_HouseholdNaming constructs names, formal greetings, and informal greetings from household members.  Configurable via Household_Naming_Settings__c.\n- **Contact Merge** [Contacts & Households]: CON_ContactMerge_TDTM preserves relationships, affiliations, and address records during contact merge.  Also handles Do Not Contact automation via CON_DoNotContact_TDTM.\n- **Account Merge** [Contacts & Households]: ACCT_AccountMerge_TDTM and ACCT_Accounts_TDTM handle post-merge cleanup for Accounts, reassigning child records and recalculating rollups.\n- **RD2 Installment Engine** [Recurring Donations (RD2)]: RD2_ScheduleService manages installment schedules and date calculations.  RD2_OpportunityService creates/updates Opportunities.\n- **Status Automation** [Recurring Donations (RD2)]: RD2_StatusAutomationService tracks lifecycle: Active, Lapsed, Closed, Paused.  Automatically transitions based on payment history and configurable grace periods.\n- **Schedule & Change Log** [Recurring Donations (RD2)]: RecurringDonationSchedule__c stores schedule entries (pause periods, amount changes).  RecurringDonationChangeLog__c tracks all modifications.\n- **RD Evaluation Batch** [Recurring Donations (RD2)]: RD2_OpportunityEvaluation_BATCH processes all active RDs nightly, creating new installments and updating statuses.  RD2_DataMigration_BATCH migrates from legacy to enhanced RDs.\n- **Elevate Integration** [Recurring Donations (RD2)]: RD2_ElevateIntegrationService handles recurring payment processing through Salesforce Elevate.  Manages commitment requests, payment capture, and tokenized card storage.\n- **CRLP Processor** [Customizable Rollups (CRLP)]: CRLP_RollupProcessor_SVC routes to correct handler by rollup type.  Six specialized SVC classes: CRLP_RollupAccount_SVC, CRLP_RollupContact_SVC, CRLP_RollupSoftCredit_SVC, CRLP_RollupAccSoftCredit_SVC, CRLP_RollupGAU_SVC, CRLP_RollupRD_SVC.\n- **Real-time Trigger** [Customizable Rollups (CRLP)]: CRLP_Rollup_TDTM fires on Opportunity and Payment changes.  Submits queueable jobs for async rollup processing.\n- **Batch Rollup Jobs** [Customizable Rollups (CRLP)]: 14 batch classes extending CRLP_Batch_Base.  NonSkew mode: CRLP_Account_BATCH, CRLP_Contact_BATCH, CRLP_GAU_BATCH, CRLP_RD_BATCH plus soft credit variants.\n- **Rollup Configuration (CMDT)** [Customizable Rollups (CRLP)]: Rollup__mdt defines each rollup: Summary_Object__c, Summary_Field__c, Detail_Object__c, Detail_Field__c, Operation__c, Filter_Group__c, Use_Fiscal_Year__c, Time_Bound_Operation_Type__c.  Filter_Group__mdt + Filter_Rule__mdt for criteria.\n- **OCR Soft Credits** [Soft Credits]: Uses standard OpportunityContactRole records.  Any contact with a role on the Opportunity gets soft credit.\n- **Partial Soft Credits** [Soft Credits]: Partial_Soft_Credit__c allows splitting soft credit amounts.  PSC_PartialSoftCredit_TDTM validates on BeforeInsert/BeforeUpdate.\n- **General Accounting Units** [Allocations & Fund Accounting]: General_Accounting_Unit__c represents a fund, program, or accounting category.  GAU_TDTM prevents deletion of GAUs with child allocations.\n- **Allocation Engine** [Allocations & Fund Accounting]: ALLO_Allocations_TDTM manages creation and enforcement on Allocation__c, Payment, and Opportunity objects.  Supports default allocations (remainder goes to default GAU), percentage splits, and total validation.\n- **Multicurrency Support** [Allocations & Fund Accounting]: ALLO_Multicurrency_TDTM handles currency adjustments on Campaign and Recurring Donation objects.  ALLO_MakeDefaultAllocations_BATCH creates default GAU allocations for existing records.\n- **TDTM Dispatcher** [TDTM Framework]: TDTM_TriggerHandler is the central dispatcher.  Each object has one trigger calling TDTM_Config_API.\n- **Handler Registration** [TDTM Framework]: Trigger_Handler__c custom SETTING fields: Class__c, Object__c, Trigger_Action__c, Load_Order__c, Active__c, Asynchronous__c, User_Managed__c, Usernames_to_Exclude__c.  TDTM_DefaultConfig defines ~50 default registrations.\n- **Recursion Guard** [TDTM Framework]: DmlWrapper collects all DML from handlers and executes in a single batch after all handlers run.  TDTM_ProcessControl tracks which handlers have fired to prevent recursion.\n- **CRLP Batch Jobs** [Batch Processing]: 14 batch classes: CRLP_Account_BATCH, CRLP_Contact_BATCH, CRLP_GAU_BATCH, CRLP_RD_BATCH, plus soft credit and skew mode variants.  All extend CRLP_Batch_Base.\n- **RD Evaluation Batch** [Batch Processing]: RD2_OpportunityEvaluation_BATCH processes all active Recurring Donations nightly.  Creates new installments, updates statuses.\n- **Legacy Rollup Batches** [Batch Processing]: RLLP_OppAccRollup_BATCH, RLLP_OppContactRollup_BATCH, RLLP_OppHouseholdRollup_BATCH, RLLP_OppSoftCreditRollup_BATCH.  Active when CRLP not enabled.\n- **Utility Batches** [Batch Processing]: HH_HouseholdNaming_BATCH recalculates names.  LVL_LevelAssign_BATCH assigns donor tiers.\n- **Reciprocal Relationships** [Relationships]: REL_Relationships_TDTM fires on npe4__Relationship__c (AfterInsert/AfterUpdate/AfterDelete).  Creates reciprocal relationship records automatically.\n- **Contact Sync** [Relationships]: REL_Relationships_Con_TDTM syncs relationships when Contacts change (AfterInsert/AfterUpdate/AfterDelete).  Preserves relationships during contact merge via CON_ContactMerge_TDTM.\n- **Auto-Create from Campaigns** [Relationships]: REL_Relationships_Cm_TDTM auto-creates relationships when Contacts are co-members of a Campaign.  Configurable via Relationship_Auto_Create_Settings__c.\n- **Address Object & Sync** [Address Management]: ADDR_Addresses_TDTM is the main handler on Address__c (Before/AfterInsert, Before/AfterUpdate, AfterDelete).  Copies address fields to Account and all household Contacts.\n- **Contact Address Sync** [Address Management]: ADDR_Contact_TDTM creates Address__c records from Contact address fields.  ADDR_Account_TDTM creates from Account address fields.\n- **Address Verification** [Address Management]: ADDR_Validator_TDTM provides address verification/normalization through external services.  Supports async execution.\n- **Affiliation Engine** [Affiliations]: AFFL_Affiliations_TDTM fires on Account (AfterInsert/AfterUpdate, order 2), Contact (AfterInsert/AfterUpdate, order 1), and npe5__Affiliation__c (After*, order 1).  Supports primary affiliation designation and status tracking.\n- **Plan Engine** [Engagement Plans]: EP_EngagementPlans_TDTM validates plan lookups (BeforeInsert) and creates Tasks from templates (AfterInsert).  Validates that each plan links to exactly one parent object.\n- **Task Management** [Engagement Plans]: EP_TaskRollup_TDTM rolls up task completion status.  EP_TaskDependency_TDTM manages dependency chains (task B starts when task A completes).\n- **BDI Batch Processor** [Batch Data Import (BDI)]: BDI_DataImport_BATCH implements Database. Batchable.\n- **Field Mapping Engine** [Batch Data Import (BDI)]: BDI_MappingService resolves field-to-field mappings via Data_Import_Field_Mapping__mdt CMDT.  BDI_ObjectMappingLogic handles object creation/matching via Data_Import_Object_Mapping__mdt.\n- **BDI Trigger Handlers** [Batch Data Import (BDI)]: BDI_DataImportBatch_TDTM fires on DataImportBatch__c (BeforeInsert).  BDI_DataImportBatchStatus_TDTM tracks batch status via DataImport__c record counts.\n- **Gift Entry Forms** [Gift Entry]: geGiftEntryFormApp is the main LWC.  geFormRenderer dynamically renders fields from template JSON.\n- **Batch Gift Entry** [Gift Entry]: geBatchGiftEntryHeader + geBatchGiftEntryTable provide batch entry with spreadsheet-like table views.  geBatchWizard creates new batches.\n- **Template Builder** [Gift Entry]: geTemplateBuilder provides a drag-and-drop form designer.  Templates stored as JSON in Form_Template__c.\n- **Level Assignment Engine** [Levels (Donor Tiers)]: LVL_Level_TDTM validates Level__c records (BeforeInsert/BeforeUpdate).  LVL_LevelAssign_BATCH runs nightly: queries all Level__c definitions, evaluates records against min/max criteria, assigns appropriate level and tracks previous level.\n- **Error Handler** [Error Handling]: ERR_Handler is the core processor.  Converts Database.\n- **Error Notification** [Error Handling]: ERR_Notifier sends email alerts for errors.  Configurable via Error_Settings__c (notification recipients, frequency).\n- **Record-Level Errors** [Error Handling]: ERR_RecordError tracks errors at the individual record level.  Enables retry logic and targeted error resolution.\n- **Settings Facade** [Settings & Configuration]: UTIL_CustomSettingsFacade provides unified access to all 14+ custom settings with in-memory caching.  Every NPSP handler calls this facade.\n- **Settings UI** [Settings & Configuration]: 64 STG_ classes provide Visualforce settings panels organized by domain: Donations, People, Recurring Donations, Bulk Data, System Tools.  LWC getting-started: gsChecklist, gsChecklistSetup, gsApplicationStatus, gsResources.\n- **Health Check & Install** [Settings & Configuration]: STG_PanelHealthCheck validates: TDTM handler registration, required fields, rollup definitions, record type mappings, configuration conflicts.  STG_InstallScript handles package install and upgrade logic.\n- **Payment Integration** [Payment Services (Elevate)]: PS_CommitmentRequest builds Elevate commitment requests for recurring payments.  PS_Request is the base request builder.\n- **Payment UI Components** [Payment Services (Elevate)]: geFormWidgetTokenizeCard for card entry, gePaymentGatewayManagement for gateway config, rd2EditPaymentInformationModal and rd2ElevateCreditCardForm for recurring donation payment editing, refundPayment for refunds.\n\n## Key Apex Classes (74 of 534 total, >500 LOC)\n### Contacts & Households\n  - CON_ContactMerge_CTRL (1465 LOC): Visualforce controller for the NPSP Contact Merge page, providing search, selection, and merge execution for duplicate Contacts. [refs: npe01__SystemAccountProcessor__c, npe01__SystemIsIndividual__c, npo02__AverageAmount__c]\n  - CON_ContactMerge_TEST2 (1051 LOC): Test class that provides comprehensive test coverage for Contact merge scenarios across different NPSP account models. [refs: npe01__Account_Processor__c, npe01__Contacts_And_Orgs_Settings__c, npe01__Contacts_and_Orgs_Settings__c]\n  - HH_Container_LCTRL (950 LOC): Lightning controller for the Manage Household page, providing CRUD operations for Household Accounts and their member Contacts. [refs: npe01__Primary_Address_Type__c, npe01__SYSTEM_AccountType__c, npo02__Formal_Greeting__c]\n### Settings & Configuration\n  - AFFL_Affiliations_TDTM (749 LOC): TDTM trigger handler that manages Affiliation records linking Contacts to Organizations. [refs: npe01__One2OneContact__c, npe01__SYSTEMIsIndividual__c]\n  - CONV_Account_Conversion_BATCH (646 LOC): Batch Apex class that performs bulk conversion of Contact accounts from one account model to another (e. [refs: npe01__Account_Processor__c, npe01__Contacts_And_Orgs_Settings__c, npe01__Contacts_and_Orgs_Settings__c]\n  - LD_LeadConvertOverride_CTRL (923 LOC): Visualforce controller that overrides the standard Salesforce Lead conversion process to integrate with NPSP's account model. [refs: npe01__Contacts_And_Orgs_Settings__c, npe01__Default_Opp_on_Convert__c, npe01__HH_Account_RecordTypeID__c]\n  - NPSP_Address (570 LOC): Full-featured domain class implementing IAddress for NPSP address record management, supporting seasonal addresses, fuzzy matching, and household association. [refs: npe01__Primary_Address_Type__c, npo02__Household__c, npo02__MailingCity__c]\n  - STG_InstallScript (626 LOC): Package install handler (implements InstallHandler) that executes during NPSP installation and upgrades. [refs: npe01__Contacts_And_Orgs_Settings__c, npe03__Recurring_Donations_Settings__c, npo02__Household_Mailing_List_ID__c]\n  - STG_Panel (589 LOC): Base class for all NPSP settings panel controllers, providing shared infrastructure at 589 lines. [refs: npe01__OppPayment__c, npe03__Recurring_Donations_Settings__c]\n  - STG_PanelADDRVerification_CTRL (531 LOC): Settings panel controller for configuring address verification services in NPSP.\n  - STG_PanelHealthCheck_CTRL (898 LOC): The largest settings panel controller at 898 lines, providing comprehensive NPSP configuration health checks. [refs: npe01__Account_Processor__c, npe01__Contacts_And_Orgs_Settings__c, npe01__Do_Not_Automatically_Create_Payment__c]\n  - STG_PanelRDHealthCheck (534 LOC): Standalone health check class (not a controller) that validates Recurring Donation configuration integrity. [refs: npe03__Custom_Installment_Settings__c, npe03__Installment_Period__c, npe03__Open_Ended_Status__c]\n  - STG_PanelUserRollup_CTRL (549 LOC): Settings panel controller for managing User-Defined Rollup fields in NPSP. [refs: npe01__membership_end_date__c, npe01__membership_start_date__c, npo02__Field_Action__c]\n  - TEST_RecurringDonationBuilder (773 LOC): Comprehensive test data builder for Recurring Donation records at 773 lines, the largest test builder in NPSP. [refs: npe03__Amount__c, npe03__Contact__c, npe03__Date_Established__c]\n  - UTIL_AbstractRollup_BATCH (513 LOC): Abstract base class for legacy rollup batch jobs at 513 lines.\n  - UTIL_BatchJobService (503 LOC): Service class for managing and monitoring batch Apex job execution at 503 lines.\n  - UTIL_CustomSettingsFacade (1127 LOC): Central facade for accessing all NPSP hierarchy custom settings at 1,127 lines, the largest utility class in this domain. [refs: npe01__Account_Processor__c, npe01__Contacts_And_Orgs_Settings__c, npe01__Disable_Account_Model_Trigger__c]\n  - UTIL_Describe (843 LOC): Comprehensive schema describe utility at 843 lines, providing cached access to SObject and field metadata.\n  - UTIL_OrgTelemetry_SVC (528 LOC): Service class that orchestrates NPSP telemetry data collection and reporting at 528 lines. [refs: npe01__Account_Processor__c, npe01__Payments_Enabled__c, npe03__Next_Payment_Date__c]\n  - UTIL_Where (765 LOC): Fluent SOQL WHERE clause builder at 765 lines, the most substantial query utility in NPSP.\n### Allocations & Fund Accounting\n  - ALLO_AllocationsRecalculateService (609 LOC): Service class that recalculates allocation amounts when parent Opportunity or Payment amounts change. [refs: npe01__OppPayment__c, npe03__Recurring_Donation__c]\n  - ALLO_AllocationsWrapper (566 LOC): Data container class that holds allocation records organized by their parent type (Opportunity, Payment, Campaign, Recurring Donation). [refs: npe01__OppPayment__c, npe03__Recurring_Donation__c]\n  - ALLO_Allocations_TDTM (1308 LOC): Primary TDTM trigger handler for the Allocation__c object at 1,308 lines, making it the largest class in the allocations domain. [refs: npe01__OppPayment__c, npe01__Opportunity__c, npe01__Paid__c]\n  - ALLO_PaymentSync_SVC (746 LOC): Service class that synchronizes allocations between Opportunity-level and Payment-level records. [refs: npe01__OppPayment__c, npe01__Opportunity__c, npe01__Paid__c]\n### Donations & Payments\n  - MTCH_FindGifts_CTRL (517 LOC): Visualforce controller that powers the Find Matching Gifts page, enabling users to search for Opportunities eligible for employer matching.\n  - OPP_OpportunityContactRoles_TDTM (898 LOC): TDTM trigger handler that automatically creates and manages Opportunity Contact Roles when donations are inserted or updated. [refs: npe01__Contact_Id_for_Role__c, npe01__Contact_Id_for_role__c, npe01__Contacts_And_Orgs_Settings__c]\n  - OPP_OpportunityNaming (505 LOC): Core implementation of the OPP_INaming interface that generates Opportunity names based on configurable naming settings. [refs: npe01__SYSTEMIsIndividual__c, npe01__systemisindividual__c]\n  - PMT_PaymentCreator (573 LOC): Core class responsible for automatically creating Payment records (npe01__OppPayment__c) when Opportunities are inserted or updated. [refs: npe01__Amount_Outstanding__c, npe01__Contacts_And_Orgs_Settings__c, npe01__Do_Not_Automatically_Create_Payment__c]\n  - PMT_PaymentWizard_CTRL (824 LOC): Visualforce controller for the Payment Wizard, which allows users to create payment schedules, write off balances, and manage individual payments on an Opportunity. [refs: npe01__Amount_Outstanding__c, npe01__Check_Reference_Number__c, npe01__Contacts_and_Orgs_Settings__c]\n  - PMT_RefundService (507 LOC): Service class that handles the full lifecycle of payment refunds, including building refund records, adjusting allocations, and updating parent Opportunities. [refs: npe01__OppPayment__c, npe01__Opportunity__c, npe01__Paid__c]\n### Batch Data Import (BDI)\n  - BDI_AdditionalObjectService (751 LOC): Service class that handles importing additional (non-standard) objects during BDI processing, such as GAU Allocations and Recurring Donations. [refs: npe03__Recurring_Donation__c]\n  - BDI_ContactService (1437 LOC): Service class responsible for matching and importing Contact and Household Account records during BDI processing. [refs: npe01__AlternateEmail__c, npe01__HomeEmail__c, npe01__SYSTEM_AccountType__c]\n  - BDI_DataImportService (2297 LOC): The central service class for BDI processing at 2,297 lines, the largest class in the domain. [refs: npe01__AlternateEmail__c, npe01__WorkEmail__c]\n  - BDI_DataImport_TEST2 (1681 LOC): Test class containing comprehensive unit tests for the BDI data import pipeline. [refs: npe01__Account_Processor__c, npe01__AlternateEmail__c, npe01__Contacts_and_Orgs_Settings__c]\n  - BDI_Donations (946 LOC): Core class that handles Opportunity and Payment creation and updating during BDI processing. [refs: npe01__Contact_Id_for_Role__c, npe01__Contacts_And_Orgs_Settings__c, npe01__Do_Not_Automatically_Create_Payment__c]\n  - BDI_Donations_TEST3 (1133 LOC): Extended test class at 1,133 lines that covers advanced donation matching and payment scenarios. [refs: npe01__Amount_Outstanding__c, npe01__Check_Reference_Number__c, npe01__Do_Not_Automatically_Create_Payment__c]\n  - BDI_ManageAdvancedMappingCtrl (894 LOC): Controller class for the advanced mapping management UI, extending BDI_FieldMapping and implementing Comparable for sorting.\n  - BDI_MatchDonations (571 LOC): Default implementation of the BDI_IMatchDonations interface that provides the standard donation matching algorithm. [refs: npe01__Number_of_Payments__c, npe01__OppPayment__c, npe01__Opportunity__c]\n  - BDI_MigrationMappingUtility (1050 LOC): Utility class at 1,050 lines that performs the actual migration of BDI mappings from help-text to custom metadata. [refs: npe01__OppPayment__c]\n### Gift Entry\n  - BGE_BatchGiftEntry_UTIL (503 LOC): Utility class that provides shared helper methods for the Batch Gift Entry feature, including field permission checks and field name resolution. [refs: npe01__OppPayment__c]\n  - BGE_ConfigurationWizard_CTRL (598 LOC): Controller for the batch configuration wizard that lets admins define which fields appear on the gift entry form. [refs: npe01__OppPayment__c]\n  - BGE_DataImportBatchEntry_CTRL (913 LOC): Primary controller for the batch gift entry data grid, extending UTIL_LightningComponentSupport for Lightning-compatible error handling. [refs: npe01__OppPayment__c, npe01__Opportunity__c, npe01__Paid__c]\n  - GE_GiftEntryController (1452 LOC): The main Apex controller for the modern Gift Entry experience, at 1,452 lines the largest class in the domain. [refs: npe01__Number_of_Payments__c, npe01__OppPayment__c, npe01__Opportunity__c]\n  - GE_Template (680 LOC): Core class responsible for managing Gift Entry form templates stored in Form_Template__c records.\n### Customizable Rollups (CRLP)\n  - CRLP_Batch_Base (691 LOC): The abstract base class for all Customizable Rollups batch jobs at 691 lines, providing shared infrastructure for rollup processing including query construction, error handling, and Payment rollup detection.\n  - CRLP_Batch_Base_Skew (615 LOC): The base class for skew-mode Customizable Rollups batch jobs, designed to handle parent records with very high numbers of related Opportunities or Payments. [refs: npe01__OppPayment__c, npe01__Opportunity__c, npe01__SYSTEMIsIndividual__c]\n  - CRLP_DefaultConfigBuilder (508 LOC): Defines the default set of Customizable Rollup definitions that map to the standard NPSP rollup fields on Account, Contact, Household, and Recurring Donation objects. [refs: npe01__Member_Level__c, npe01__Membership_End_Date__c, npe01__Membership_Origin__c]\n  - CRLP_DefaultConfigBuilder_SVC (1007 LOC): Converts legacy rollup helper configurations (RLLP) and User Rollup Field Settings into Customizable Rollup (CRLP) metadata definitions at 1,007 lines. [refs: npe01__OppPayment__c, npe01__Paid__c, npe01__Written_Off__c]\n  - CRLP_Rollup (576 LOC): The core rollup state container class that holds the accumulated calculation values for a single rollup definition during batch or trigger processing.\n  - CRLP_RollupCMT (709 LOC): Manages the creation, validation, and deployment of Customizable Rollup Custom Metadata Type records including rollup definitions and filter rules. [refs: npe01__OppPayment__c, npe03__Recurring_Donation__c]\n  - CRLP_RollupProcessor (696 LOC): The main rollup processing engine at 696 lines that coordinates the execution of rollup calculations across summary and detail records. [refs: npo02__NumberOfClosedOpps__c, npo02__NumberOfMembershipOpps__c]\n  - CRLP_RollupUI_SVC (1011 LOC): The comprehensive UI service for the Customizable Rollups administration interface at 1,011 lines, powering the grid views, detail forms, and save operations for rollup and filter group definitions. [refs: npe01__OppPayment__c, npe01__system_accounttype__c, npe01__systemaccountprocessor__c]\n  - RLLP_OppRollup (1119 LOC): The original Legacy rollup calculation engine at 1,119 lines that computes donation totals, averages, membership stats, best gift year, and soft credit amounts on Account, Contact, and Household records. [refs: npo02__AverageAmount__c, npo02__Best_Gift_Year_Total__c, npo02__Best_Gift_Year__c]\n  - RLLP_OppRollup_TEST2 (1006 LOC): A comprehensive test class for the Legacy rollup engine covering Account, Contact, and Household rollup calculations, soft credit processing, User Rollup Field Settings, and multi-currency scenarios. [refs: npe01__Account_Processor__c, npe01__Contact_Id_for_Role__c, npe01__Contacts_and_Orgs_Settings__c]\n  - RLLP_OppRollup_UTIL (959 LOC): A large utility class at 959 lines that provides shared helper functions for the Legacy rollup engine, including rollup variable setup, record type detection, multi-currency handling, and individual Account identification. [refs: npe01__Is_Opp_From_Individual__c, npe01__Member_Level__c, npe01__Membership_End_Date__c]\n### Engagement Plans\n  - EP_ManageEPTemplate_CTRL (628 LOC): Visualforce controller (628 lines) for the Engagement Plan Template management UI, enabling admins to build hierarchical task templates.\n### Error Handling\n  - ERR_Handler (611 LOC): Core error processing engine for NPSP at 611 lines, responsible for capturing, categorizing, and routing errors from DML operations, triggers, and batch jobs.\n  - ERR_RecordError (598 LOC): Exception subclass (598 lines) that associates errors with specific SObject records, tracking which records failed and why.\n### Soft Credits\n  - PSC_ManageSoftCredits_CTRL (637 LOC): Visualforce controller (637 lines) for the Manage Soft Credits page, enabling users to add, edit, and remove Partial_Soft_Credit__c records for an Opportunity. [refs: npe01__Is_Opp_From_Individual__c, npe01__Opportunity_Contact_Role_Default_role__c, npo02__Soft_Credit_Roles__c]\n### Payment Services (Elevate)\n  - PS_CommitmentRequest (880 LOC): Builder class (880 lines) that constructs HTTP request payloads for creating, updating, and pausing Elevate commitment (recurring donation) records. [refs: npe03__Amount__c, npe03__Contact__c, npe03__Installment_Period__c]\n### Recurring Donations (RD2)\n  - RD2_ApiService (560 LOC): Provides the external API layer for Enhanced Recurring Donations, enabling programmatic queries against schedules and installments, as well as pause operations. [refs: npe03__Recurring_Donation__c]\n  - RD2_DataMigrationBase_BATCH (547 LOC): Provides the shared batch processing framework for migrating Legacy Recurring Donation records to the Enhanced (RD2) format. [refs: npe03__Amount__c, npe03__Contact__c, npe03__Date_Established__c]\n  - RD2_EnablementDelegate_CTRL (643 LOC): Controls the multi-step enablement wizard for upgrading from Legacy to Enhanced Recurring Donations, extending STG_Panel and implementing Queueable. [refs: npe03__Next_Payment_Date__c, npe03__Recurring_Donation__c]\n  - RD2_OpportunityEvaluationService (713 LOC): Evaluates which Opportunities need to be created, updated, or voided based on changes to Enhanced Recurring Donation schedules. [refs: npe03__Amount__c, npe03__Contact__c, npe03__Installment_Period__c]\n  - RD2_OpportunityService (531 LOC): Performs the actual DML operations to create, update, and void Opportunities linked to Enhanced Recurring Donations. [refs: npe01__OppPayment__c, npe01__Opportunity__c, npe01__Payment_Date__c]\n  - RD2_RecurringDonation (648 LOC): The core domain model class for Enhanced Recurring Donations, encapsulating business logic for a single RD record at 648 lines. [refs: npe03__Amount__c, npe03__Installment_Period__c, npe03__Installments__c]\n  - RD2_RecurringDonations_TDTM (552 LOC): The primary TDTM trigger handler for Enhanced Recurring Donation record DML events, executing on insert, update, and delete operations. [refs: npe03__Installment_Period__c, npe03__Next_Payment_Date__c, npe03__Recurring_Donation__c]\n  - RD2_ScheduleService (1295 LOC): The largest class in the Recurring Donations domain at 1,295 lines, managing all aspects of installment schedule creation, visualization, and date calculation for Enhanced RDs. [refs: npe03__Amount__c, npe03__Date_Established__c, npe03__Installment_Period__c]\n  - RD2_StatusMappingSettings_CTRL (519 LOC): Controls the status mapping configuration page, extending STG_Panel and implementing MetadataDeploymentHandler to deploy status mapping Custom Metadata records. [refs: npe03__Recurring_Donation__c]\n  - RD2_ValidationService (736 LOC): Enforces all business validation rules for Enhanced Recurring Donations during insert and update operations at 736 lines. [refs: npe01__SYSTEMIsIndividual__c, npe03__Amount__c, npe03__Contact__c]\n  - RD2_VisualizeScheduleController (679 LOC): Powers the rdScheduleVisualizer Lightning Web Component by generating projected installment data and active schedule views for a Recurring Donation. [refs: npe03__Amount__c, npe03__Installment_Period__c, npe03__Installments__c]\n  - RD_RecurringDonations (1311 LOC): The original monolithic Legacy Recurring Donations class at 1,311 lines, handling Opportunity creation, contact role assignment, field synchronization, and record updates. [refs: npe01__Contact_Id_For_Role__c, npe01__Contact_Id_for_Role__c, npe03__Add_Campaign_to_All_Opportunites__c]\n  - RD_RecurringDonations_TEST2 (1548 LOC): A comprehensive test class covering Legacy Recurring Donations batch processing and concurrency scenarios. [refs: npe03__Add_Campaign_to_All_Opportunites__c, npe03__Amount__c, npe03__Custom_Field_Mapping__c]\n### Relationships\n  - REL_Relationships_TDTM (555 LOC): Primary TDTM trigger handler (555 lines) for the npe4__Relationship__c object, managing the full lifecycle of reciprocal relationships.\n\n## Other Apex Classes by Domain\n- Contacts & Households: 24 additional classes\n- Address Management: 12 additional classes\n- Settings & Configuration: 224 additional classes\n- Allocations & Fund Accounting: 11 additional classes\n- Donations & Payments: 22 additional classes\n- Batch Data Import (BDI): 32 additional classes\n- Gift Entry: 6 additional classes\n- Customizable Rollups (CRLP): 48 additional classes\n- Engagement Plans: 6 additional classes\n- Error Handling: 8 additional classes\n- Levels (Donor Tiers): 4 additional classes\n- Soft Credits: 2 additional classes\n- Payment Services (Elevate): 6 additional classes\n- Recurring Donations (RD2): 51 additional classes\n- Relationships: 4 additional classes\n\n## Lightning Web Components (122)\n- Contacts & Households: potentialDuplicates\n- Settings & Configuration: accordionSection, batchProgress, bdeRetirementAlert, customDatatable, customPicklistType, formattedTextWithDate, gsAccordionLabel, gsAccordionSection, gsApplicationStatus, gsChecklist, gsChecklistIcon, gsChecklistItem, gsChecklistSetup, gsLabelMapper, gsResources, gsVideoHeader, gseuHeader, gseuTrailhead, libsMoment, modal, progressRing, psElevateTokenHandler, pubsubNoPageRef, refundPayment, stopRecurringDonationModal, util, utilAlertBanner, utilCard, utilCommon, utilDedicatedListener, utilDualListbox, utilExpandableSection, utilIllustration, utilInlineText, utilInput, utilNumberFormatter, utilPageHeader, utilPageHeaderDetailBlock, utilPageHeaderDetailRow, utilPageLevelMessage, utilPlatformEventListener, utilProgressBar, utilPrompt, utilScreenReaderAnnouncer, utilSearchableCombobox, utilStencil, utilTemplateBuilder\n- Donations & Payments: donationHistory, donationHistoryFilter, donationHistoryTable, givingSummary, givingSummaryForDetailPage\n- Batch Data Import (BDI): bdiBatchNumberSettings, bdiFieldMappingModal, bdiFieldMappings, bdiObjectMappingModal, bdiObjectMappings\n- Gift Entry: geBatchGiftEntryHeader, geBatchGiftEntryTable, geBatchWizard, geConstants, geDonationMatching, geDonationMatchingOpportunityCard, geDonationMatchingPaymentCard, geElevateBatch, geFormField, geFormRenderer, geFormSection, geFormService, geFormWidget, geFormWidgetAllocation, geFormWidgetRowAllocation, geFormWidgetSoftCredit, geFormWidgetSoftCreditRow, geFormWidgetTokenizeCard, geGatewaySelectWidget, geGatewaySettings, geGift, geGiftBatch, geGiftEntryFormApp, geHome, geLabelService, geListView, geModalPrompt, geModalRecurringDonation, gePaymentGatewayManagement, geRecurringGiftInfo, geReviewDonations, geSettings, geTemplateBuilder, geTemplateBuilderBatchHeader, geTemplateBuilderFormField, geTemplateBuilderFormFields, geTemplateBuilderFormSection, geTemplateBuilderSectionModalBody, geTemplateBuilderService, geTemplateBuilderTemplateInfo, geTemplateBuilderWidget, geTemplates, geWidgetService\n- Error Handling: errRecordLog\n- Recurring Donations (RD2): rd2ChangeEntry, rd2ChangeEntryItem, rd2ChangeEntryValue, rd2ChangeLog, rd2EditPaymentInformationModal, rd2ElevateCreditCardForm, rd2ElevateInformation, rd2EntryForm, rd2EntryFormCustomFieldsSection, rd2EntryFormDonorSection, rd2EntryFormScheduleSection, rd2PauseForm, rd2RecurringDonation, rd2Service, rd2StatusAutomationSettings, rd2StatusMappingSettings, rdActiveSchedule, rdScheduleVisualizer\n- Relationships: relationshipsNavigator, relationshipsTreeGrid\n\n## Custom Objects (64)\n- Account (Account): The standard Salesforce Account object extended by NPSP with 21 custom fields...\n- Contact (Contact): The standard Salesforce Contact object extended by NPSP with 27 custom fields...\n- npo02__Household__c (npo02__Household__c): Legacy custom object that represented Households before NPSP migrated to the ...\n- Addr_Verification_Settings__c (Address Verification Settings): Custom Settings object that stores the active configuration for address verif...\n- Address_Verification_Settings__c (Address Verification Settings-DEPRECATED): Deprecated Custom Settings object that previously stored address verification...\n- Address__c (Address): Custom object that stores physical mailing addresses associated with Househol...\n- Activity (Activity): Extends the standard Activity object with lookup fields to Engagement_Plan_Ta...\n- AutoNumber__c (AutoNumber): Stores auto-numbering configuration for NPSP objects, defining display format...\n- Batch_Data_Entry_Settings__c (Batch Data Entry Settings): A legacy custom settings object that controlled the original Batch Data Entry...\n- Custom_Column_Header__c (Custom Column Header): Defines custom column configurations for NPSP list views, storing the field A...\n- Custom_Notification__mdt (Custom Notification): A custom metadata type that configures NPSP in-app notifications, defining th...\n- Customizable_Rollup_Settings__c (Customizable Rollup Settings): A hierarchical custom settings object that controls the Customizable Rollups ...\n- Data_Import_Field_Mapping_Set__mdt (Data Import Field Mapping Set): A custom metadata type that groups Data Import field mappings into a named se...\n- Data_Import_Field_Mapping__mdt (Data Import Field Mapping): A custom metadata type that defines individual field-level mappings between t...\n- Data_Import_Object_Mapping_Set__mdt (Data Import Object Mapping Set): A top-level custom metadata type that serves as the root container for the Ad...\n- Data_Import_Object_Mapping__mdt (Data Import Object Mapping): A custom metadata type that maps NPSP Data Import records to target Salesforc...\n- Data_Import_Settings__c (Data Import Settings): A hierarchical custom settings object that governs NPSP Data Import behavior,...\n- DeploymentEvent__e (Deployment Event): A platform event that broadcasts the completion status of metadata deployment...\n- DuplicateRecordSet (DuplicateRecordSet): Extends the standard DuplicateRecordSet object for use within NPSP duplicate ...\n- Engagement_Plan_Template__c (Engagement Plan Template): Defines reusable templates for NPSP Engagement Plans, specifying default task...\n- Filter_Group__mdt (Filter Group): A custom metadata type that groups related filter rules for NPSP Customizable...\n- Filter_Rule__mdt (Filter Rule): A custom metadata type that defines individual filter criteria within a Filte...\n- Gift_Entry_Settings__c (Gift Entry Settings): A hierarchical custom settings object that controls the NPSP Gift Entry featu...\n- Household_Naming_Settings__c (Household Naming Settings): A hierarchical custom settings object that controls how NPSP generates househ...\n- Lead (Lead): Extends the standard Lead object with NPSP-specific fields for batch processi...\n- Levels_Settings__c (Levels Settings): A hierarchical custom settings object that configures the NPSP Levels engine,...\n- Package_Settings__c (NPSP Package Settings): A hierarchical custom settings object that stores the active NPSP namespace p...\n- Payment_Services_Configuration__c (Payment Services Configuration): Stores key-value configuration pairs for Salesforce.\n- RecurringDonationStatusMapping__mdt (Recurring Donation Status Mapping): A custom metadata type that maps recurring donation status picklist values to...\n- Rollup__mdt (Rollup): A custom metadata type that defines individual Customizable Rollup (CRLP) def...\n- Schedulable__c (DEPRECATED-Schedulable): A deprecated custom object that previously stored configuration for NPSP sche...\n- npe01__Contacts_And_Orgs_Settings__c (npe01__Contacts_And_Orgs_Settings__c): A hierarchical custom settings object from the npe01 (Contacts & Organization...\n- npe03__Recurring_Donations_Settings__c (npe03__Recurring_Donations_Settings__c): A hierarchical custom settings object from the npe03 (Recurring Donations) pa...\n- npe4__Relationship_Settings__c (npe4__Relationship_Settings__c): A hierarchical custom settings object from the npe4 (Relationships) package t...\n- npo02__Households_Settings__c (npo02__Households_Settings__c): A hierarchical custom settings object from the npo02 (Households) package tha...\n- Allocation__c (GAU Allocation): Custom object that links a donation (Opportunity or Payment) to a General Acc...\n- Allocations_Settings__c (Allocations Settings): Custom Settings object that stores the global configuration for the GAU Alloc...\n- Fund__c (DEPRECATED-Fund): Deprecated custom object that was the predecessor to General_Accounting_Unit_...\n- General_Accounting_Unit__c (General Accounting Unit): Custom object that represents a fund, program, or accounting category to whic...\n- Grant_Deadline__c (Deliverable): Custom object (labeled Deliverable) that tracks grant deliverables and deadli...\n- Opportunity (Opportunity): The standard Salesforce Opportunity object extended by NPSP with 44 custom fi...\n- Opportunity_Naming_Settings__c (Opportunity Naming Settings): Custom Settings object that stores configurable naming formats for Opportunit...\n- Opportunity_Stage_To_State_Mapping__mdt (Opportunity Stage To State Mapping): Custom Metadata Type that maps Opportunity Stage picklist values to abstract ...\n- npe01__OppPayment__c (npe01__OppPayment__c): The Payment custom object that tracks individual payment installments against...\n- DataImportBatch__c (NPSP Data Import Batch): Custom object that represents a batch container for grouping DataImport__c re...\n- DataImport__c (NPSP Data Import): Core custom object with 175 fields that serves as the staging record for all ...\n- Form_Template__c (Form Template): Custom object that stores Gift Entry form template definitions.\n- GetStartedChecklistItem__mdt (NPSP Get Started Checklist Item): Custom metadata type that defines individual checklist items on the NPSP Get ...\n- GetStartedChecklistSection__mdt (NPSP Get Started Checklist Section): Custom metadata type that defines top-level sections on the NPSP Get Started ...\n- GetStartedCompletionChecklistState__c (Get Started Completion Checklist State): Custom object that tracks per-user completion state of Get Started checklist ...\n- Engagement_Plan_Task__c (Engagement Plan Task): Custom object representing an individual task template within an Engagement P...\n- Engagement_Plan__c (Engagement Plan): Custom object representing an active instance of an engagement plan applied t...\n- Error_Settings__c (Error Settings): Custom Settings object (hierarchy type) that stores org-wide configuration fo...\n- Error__c (Error): Custom object that serves as the persistent error log for all NPSP errors, st...\n- Level__c (Level): Custom object that defines a donor level tier with minimum and maximum amount...\n- Account_Soft_Credit__c (Account Soft Credit): Custom object that tracks soft credit allocations at the Account level for a ...\n- Partial_Soft_Credit__c (Partial Soft Credit): Custom object that tracks partial soft credit allocations at the Contact leve...\n- RecurringDonationChangeLog__c (Recurring Donation Change Log): A custom object that stores an audit trail of field-level changes made to Enh...\n- RecurringDonationSchedule__c (Recurring Donation Schedule): A custom object that stores the installment schedule definitions for Enhanced...\n- npe03__Recurring_Donation__c (npe03__Recurring_Donation__c): The core Recurring Donation custom object from the npe03 managed package, sto...\n- Relationship_Sync_Excluded_Fields__c (Fields to Exclude from Sync): Custom Settings object that allows administrators to specify which fields on ...\n- npe4__Relationship__c (npe4__Relationship__c): Core custom object from the Relationships package (npe4) that stores relation...\n- Batch__c (Batch): Custom object that represents a batch processing container used for grouping ...\n- npe5__Affiliation__c (npe5__Affiliation__c): Core custom object from the Affiliations package (npe5) that links a Contact ...\n\n## Triggers (26)\n- TDTM_Account on Account (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_Contact on Contact (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_HouseholdObject on npo02__Household__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_Address on Address__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_Campaign on Campaign (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_CampaignMember on CampaignMember (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_Lead on Lead (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_Task on Task (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_User on User (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_Allocation on Allocation__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_GeneralAccountingUnit on General_Accounting_Unit__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_GrantDeadline on Grant_Deadline__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_Opportunity on Opportunity (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_OpportunityContactRole on OpportunityContactRole (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_Payment on npe01__OppPayment__c (before insert, before update, before delete, after insert, after update, after delete, after undelete) → \n- TDTM_DataImport on DataImport__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_DataImportBatch on DataImportBatch__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_FormTemplate on Form_Template__c (before insert, before update, before delete, after insert, after update, after delete, after undelete) → \n- TDTM_EngagementPlan on Engagement_Plan__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_EngagementPlanTask on Engagement_Plan_Task__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_Level on Level__c (before insert, before update) → \n- TDTM_AccountSoftCredit on Account_Soft_Credit__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_PartialSoftCredit on Partial_Soft_Credit__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_RecurringDonation on npe03__Recurring_Donation__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n- TDTM_Relationship on npe4__Relationship__c (before insert, before update, before delete, after insert, after update, after delete, after undelete) → \n- TDTM_Affiliation on npe5__Affiliation__c (after delete, after insert, after undelete, after update, before delete, before insert, before update) → \n\n## Glossary\nTDTM = Table-Driven Trigger Management, GAU = General Accounting Unit, RD2 = Enhanced Recurring Donations v2, OCR = Opportunity Contact Role, CRLP = Customizable Rollups, BDI = Batch Data Import, BGE = Batch Gift Entry, NPSP = Nonprofit Success Pack, HH = Household, PMT = Payment, OPP = Opportunity, LWC = Lightning Web Component, ADDR = Address Management, AFFL = Affiliations, REL = Relationships, ERR = Error Handling, UTIL = Utilities, CMDT = Custom Metadata Type, DML = Data Manipulation Language, SOQL = Salesforce Object Query Language\n## Data Flow Connections\n- Donations & Payments connects to: contacts: Donor Contact/Account provides the giving entity; rollups: Every donation change triggers CRLP rollup recalculation; allocations: Donation amount distributed across GAUs; softcredits: Soft credits attribute donations to additional contacts; recurring: Recurring Donations auto-create Opportunity records; giftentry: Gift Entry UI creates donations through BDI; tdtm: Opportunity trigger dispatches TDTM handlers; affiliations: Employment affiliations identify matching gift eligibility; engagement: Engagement plans triggered by donation events; bdi: BDI creates Opportunities and Payments; elevate: Elevate processes payment capture and refunds\n- Contacts & Households connects to: donations: Contacts/Accounts are the donors on Opportunities; rollups: Giving totals roll up to Contact and Account records; relationships: Contact-to-contact relationships tracked; affiliations: Contact-to-organization links; addresses: Household addresses shared by all members; recurring: Donor Contacts linked to Recurring Donations; softcredits: Soft credits attributed to Contact records; tdtm: Contact trigger dispatches TDTM handlers; engagement: Engagement plans assigned to Contacts; bdi: BDI creates and matches Contacts and Accounts; levels: Donor levels assigned to Contacts and Accounts\n- Recurring Donations (RD2) connects to: donations: RDs auto-create Opportunity records as installments; contacts: Each RD linked to a donor Contact/Account; rollups: Current/Next Year values roll up from installments; batch: RD2_OpportunityEvaluation_BATCH processes bulk updates; elevate: Elevate handles recurring payment processing; allocations: RD allocations propagate to generated Opportunities; tdtm: Recurring Donation trigger dispatches RD2 TDTM handlers\n- Customizable Rollups (CRLP) connects to: donations: Donation changes are the primary rollup trigger; contacts: Rollup results written to Contact and Account; allocations: GAU allocation amounts roll up; batch: Full recalculation runs as batch Apex; softcredits: Separate rollup types for soft vs hard credits; recurring: RD rollup summaries; levels: Rollup fields used as level assignment criteria; settings: Rollup definitions configured through Settings UI\n- Soft Credits connects to: donations: Soft credits attached to Opportunities; contacts: Credits attributed to Contact records; rollups: Separate CRLP rollup types for soft credits; giftentry: Gift Entry provides soft credit widget in forms\n- Allocations & Fund Accounting connects to: donations: Allocations split donation amounts across funds; rollups: GAU totals maintained by CRLP_GAU_BATCH; recurring: RD allocations propagate to generated Opportunities; bdi: BDI creates allocations during data import; giftentry: Gift Entry provides allocation widget in forms\n- TDTM Framework connects to: donations: Opportunity trigger dispatches ~10 handlers; contacts: Contact trigger dispatches account, address, relationship handlers; recurring: Recurring Donation trigger dispatches RD2 handlers; settings: Handler config in Trigger_Handler__c custom setting; errors: Errors caught from TDTM handler chain\n- Batch Processing connects to: rollups: CRLP batch jobs are the bulk rollup mechanism; recurring: RD evaluation batch manages installment pipeline; settings: Batch sizes configured in NPSP Settings; levels: LVL_LevelAssign_BATCH assigns donor tiers; addresses: ADDR_Validator_BATCH for bulk address verification; errors: Batch job errors logged through ERR_Handler\n- Relationships connects to: contacts: Relationships exist between Contacts and are preserved during merges\n- Address Management connects to: contacts: Addresses shared across household members; batch: ADDR_Validator_BATCH for bulk verification\n- Affiliations connects to: contacts: Contacts are affiliated with organizations; donations: Employment affiliations identify matching gift eligibility\n- Engagement Plans connects to: contacts: Plans assigned to Contacts; donations: Plans triggered by donation events\n- Batch Data Import (BDI) connects to: giftentry: Gift Entry UI is built on BDI; donations: Creates Opportunities and Payments; contacts: Creates/matches Contacts and Accounts; allocations: Creates allocations during import\n- Gift Entry connects to: bdi: Gift Entry uses BDI as processing engine; donations: Creates Opportunities and Payments; elevate: Card tokenization during entry; softcredits: Soft credit widget in forms; allocations: Allocation widget in forms\n- Levels (Donor Tiers) connects to: rollups: Level criteria based on rollup summary fields; contacts: Levels assigned to Contacts and Accounts; batch: LVL_LevelAssign_BATCH runs nightly\n- Error Handling connects to: tdtm: Errors caught from TDTM handler chain; settings: Error_Settings__c configures notifications; batch: Batch job errors logged through ERR_Handler\n- Settings & Configuration connects to: tdtm: Handler records managed via Settings; rollups: Rollup definitions through Settings UI; batch: Batch sizes and schedules in Settings; errors: Error notification configured in Settings\n- Payment Services (Elevate) connects to: giftentry: Card tokenization during gift entry; recurring: Recurring payment processing; donations: Payment capture and refunds\n";
